<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="753px" preserveAspectRatio="none" style="width:1157px;height:753px;" version="1.1" viewBox="0 0 1157 753" width="1157px" zoomAndPan="magnify"><defs><filter height="300%" id="f9s6p0rijdiki" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster Zex--><polygon fill="#FFFFFF" filter="url(#f9s6p0rijdiki)" points="382,162,413,162,420,184.4883,696,184.4883,696,608,382,608,382,162" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="382" x2="420" y1="184.4883" y2="184.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="386" y="177.5352">Zex</text><!--cluster MiddleLayer--><polygon fill="#FFFFFF" filter="url(#f9s6p0rijdiki)" points="445,24,538,24,545,46.4883,649,46.4883,649,112,445,112,445,24" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="445" x2="545" y1="46.4883" y2="46.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="449" y="39.5352">MiddleLayer</text><!--cluster Srv1--><polygon fill="#FFFFFF" filter="url(#f9s6p0rijdiki)" points="22,658,59,658,66,680.4883,574,680.4883,574,746,22,746,22,658" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="22" x2="66" y1="680.4883" y2="680.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="26" y="673.5352">Srv1</text><!--cluster Srv2--><polygon fill="#FFFFFF" filter="url(#f9s6p0rijdiki)" points="598,658,635,658,642,680.4883,1150,680.4883,1150,746,598,746,598,658" style="stroke: #000000; stroke-width: 2.0;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="598" x2="642" y1="680.4883" y2="680.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31" x="602" y="673.5352">Srv2</text><!--entity Pipeline--><ellipse cx="464" cy="229" fill="#FEFECE" filter="url(#f9s6p0rijdiki)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="437" y="259.5352">Pipeline</text><!--entity Pipeliner--><rect fill="#FEFECE" filter="url(#f9s6p0rijdiki)" height="36.4883" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="398" y="320"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="393" y="325"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="393" y="346.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="408" y="343.5352">Pipeliner</text><!--entity Subscribe--><ellipse cx="619" cy="229" fill="#FEFECE" filter="url(#f9s6p0rijdiki)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="585.5" y="259.5352">Subscribe</text><!--entity Scheduler--><rect fill="#FEFECE" filter="url(#f9s6p0rijdiki)" height="36.4883" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="592" y="320"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="587" y="325"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="587" y="346.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="602" y="343.5352">Scheduler</text><!--entity Registrer--><rect fill="#FEFECE" filter="url(#f9s6p0rijdiki)" height="36.4883" style="stroke: #A80036; stroke-width: 1.5;" width="82" x="510" y="434"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="505" y="439"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="505" y="460.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="520" y="457.5352">Registrer</text><!--entity grpc--><ellipse cx="594" cy="563" fill="#FEFECE" filter="url(#f9s6p0rijdiki)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="578.5" y="593.5352">grpc</text><!--entity serviceObjectFunction--><rect fill="#FEFECE" filter="url(#f9s6p0rijdiki)" height="36.4883" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="461.75" y="60"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="456.75" y="65"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="456.75" y="86.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="471.75" y="83.5352">serviceObjectFunction</text><!--entity "srv1.reflection"--><rect fill="#FEFECE" filter="url(#f9s6p0rijdiki)" height="36.4883" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="430" y="694"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="425" y="699"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="425" y="720.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="440" y="717.5352">"srv1.reflection"</text><!--entity "Srv1.GetSomething"--><rect fill="#FEFECE" filter="url(#f9s6p0rijdiki)" height="36.4883" style="stroke: #A80036; stroke-width: 1.5;" width="161" x="38.75" y="694"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="33.75" y="699"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="33.75" y="720.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="48.75" y="717.5352">"Srv1.GetSomething"</text><!--entity "Srv1.PutSomething"--><rect fill="#FEFECE" filter="url(#f9s6p0rijdiki)" height="36.4883" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="235" y="694"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="230" y="699"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="230" y="720.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="245" y="717.5352">"Srv1.PutSomething"</text><!--entity "srv2.reflection"--><rect fill="#FEFECE" filter="url(#f9s6p0rijdiki)" height="36.4883" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="1006" y="694"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1001" y="699"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1001" y="720.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1016" y="717.5352">"srv2.reflection"</text><!--entity "Srv2.GetSomething"--><rect fill="#FEFECE" filter="url(#f9s6p0rijdiki)" height="36.4883" style="stroke: #A80036; stroke-width: 1.5;" width="161" x="614.75" y="694"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="609.75" y="699"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="609.75" y="720.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="624.75" y="717.5352">"Srv2.GetSomething"</text><!--entity "Srv2.PutSomething"--><rect fill="#FEFECE" filter="url(#f9s6p0rijdiki)" height="36.4883" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="811" y="694"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="806" y="699"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="806" y="720.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="821" y="717.5352">"Srv2.PutSomething"</text><!--link Pipeline to Pipeliner--><path d="M462.046,238.042 C458.121,254.196 449.159,291.076 443.354,314.968 " fill="none" id="Pipeline-Pipeliner" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="442.166,319.857,448.1771,312.0553,443.346,314.9982,440.4031,310.1672,442.166,319.857" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Subscribe to Scheduler--><path d="M621.066,243.004 C624.128,262.275 629.874,298.441 633.276,319.857 " fill="none" id="Subscribe-Scheduler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="620.278,238.042,617.7391,247.558,621.0622,242.9801,625.6401,246.3032,620.278,238.042" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Scheduler to Pipeliner--><path d="M586.573,338 C553.082,338 509.389,338 478.068,338 " fill="none" id="Scheduler-Pipeliner" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="591.858,338,582.858,334,586.858,338,582.858,342,591.858,338" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="496.5" y="330.5684">do new pipe</text><!--link Pipeliner to Registrer--><path d="M447.121,356.038 C455.11,369.961 467.663,389.622 482,404 C492.117,414.147 504.71,423.466 516.358,431.083 " fill="none" id="Pipeliner-Registrer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="520.601,433.811,515.1943,425.5789,516.3954,431.1068,510.8675,432.3079,520.601,433.811" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="483" y="399.5684">validate</text><!--link Scheduler to Registrer--><path d="M587.151,353.804 C571.909,360.979 556.798,371.326 548,386 C540.359,398.744 541.362,415.553 544.144,428.885 " fill="none" id="Scheduler-Registrer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="545.329,433.992,547.1912,424.3208,544.1989,429.1214,539.3983,426.129,545.329,433.992" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="591.878,351.678,582.0292,351.72,587.3176,353.7282,585.3095,359.0166,591.878,351.678" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="549" y="399.5684">lookup grpc</text><!--link Scheduler to grpc--><path d="M635.127,361.359 C634.424,373.94 633.179,389.907 631,404 C622.565,458.553 605.367,522.156 597.762,548.998 " fill="none" id="Scheduler-grpc" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="596.374,553.863,602.6917,546.3074,597.747,549.0552,594.9992,544.1106,596.374,553.863" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="635.396,356.189,630.9309,364.9675,635.1346,361.1822,638.9199,365.3858,635.396,356.189" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Registrer to grpc--><path d="M559.563,474.706 C569.17,499.06 584.264,537.322 590.803,553.896 " fill="none" id="Registrer-grpc" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="557.719,470.031,557.3022,479.871,559.5545,474.6819,564.7436,476.9342,557.719,470.031" style="stroke: #A80036; stroke-width: 1.0;"/><!--link serviceObjectFunction to Pipeline--><path d="M526.175,96.407 C516.828,105.105 506.289,116.266 499,128 C481.344,156.42 471.109,194.94 466.662,214.858 " fill="none" id="serviceObjectFunction-Pipeline" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="465.56,219.959,471.3724,212.0081,466.6171,215.072,463.5532,210.3168,465.56,219.959" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="500" y="141.5684">write pipe</text><!--link serviceObjectFunction to Subscribe--><path d="M557.552,100.837 C573.815,134.492 604.258,197.493 615.068,219.863 " fill="none" id="serviceObjectFunction-Subscribe" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="555.259,96.092,555.5742,105.9358,557.4349,100.5937,562.7769,102.4544,555.259,96.092" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="579" y="141.5684">when done</text><!--link grpc to "srv1.reflection"--><path d="M585.48,576.524 C567.605,602.8 526.16,663.7252 505.765,693.705 " fill="none" id="grpc-&quot;srv1.reflection&quot;" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="588.337,572.325,579.9672,577.516,585.5244,576.4589,586.5814,582.0161,588.337,572.325" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="553" y="637.5684">registry</text><!--link grpc to "Srv1.GetSomething"--><path d="M579.859,565.511 C529.074,571.291 351.766,594.522 217,650 C191.329,660.568 164.746,677.5596 145.753,690.929 " fill="none" id="grpc-&quot;Srv1.GetSomething&quot;" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="141.578,693.8959,151.2311,691.9418,145.6533,690.999,146.5961,685.4213,141.578,693.8959" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="584.899,564.948,575.5103,561.9729,579.93,565.5036,576.3992,569.9233,584.899,564.948" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="288" y="637.5684">call</text><!--link grpc to "Srv1.PutSomething"--><path d="M579.793,570.017 C548.763,583.311 472.836,616.654 412,650 C388.808,662.7121 363.544,678.6721 344.615,691.0783 " fill="none" id="grpc-&quot;Srv1.PutSomething&quot;" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="340.432,693.8292,350.1495,692.2262,344.6096,691.0819,345.7539,685.542,340.432,693.8292" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="584.716,567.915,574.8682,567.7693,580.1174,569.8779,578.0088,575.127,584.716,567.915" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="462" y="637.5684">call</text><!--link grpc to "srv2.reflection"--><path d="M608.293,564.904 C661.18,568.696 849.89,586.214 989,650 C1013,661.006 1036.69,680.0572 1052.18,693.9468 " fill="none" id="grpc-&quot;srv2.reflection&quot;" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="603.062,564.543,611.7652,569.1532,608.0501,564.8873,612.316,561.1722,603.062,564.543" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="970" y="637.5684">registry</text><!--link grpc to "Srv2.GetSomething"--><path d="M602.605,576.524 C619.812,601.568 658.647,658.09 680.085,689.2918 " fill="none" id="grpc-&quot;Srv2.GetSomething&quot;" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="683.117,693.705,681.3177,684.0219,680.2858,689.5838,674.7238,688.5519,683.117,693.705" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="599.72,572.325,601.5209,582.0078,602.5519,576.4457,608.114,577.4767,599.72,572.325" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="648" y="637.5684">call</text><!--link grpc to "Srv2.PutSomething"--><path d="M608.213,569.3 C641.328,581.829 725.903,614.868 793,650 C816.768,662.4449 842.478,678.5558 861.599,691.0949 " fill="none" id="grpc-&quot;Srv2.PutSomething&quot;" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="865.82,693.8755,860.5037,685.5847,861.6443,691.1254,856.1036,692.2659,865.82,693.8755" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="603.351,567.468,610.3633,574.3838,608.0301,569.2305,613.1833,566.8973,603.351,567.468" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="778" y="637.5684">call</text><!--
@startuml

package "Zex" {
Pipeline - -> [Pipeliner]
Subscribe <- - [Scheduler]

[Scheduler] <-right- [Pipeliner]: do new pipe

[Pipeliner] -down-> [Registrer] : validate

[Scheduler] <- -> [Registrer] : lookup grpc
[Scheduler] <- -> grpc

[Registrer] <- - grpc
}

package "MiddleLayer" {
    [serviceObjectFunction] - -> Pipeline : write pipe
    [serviceObjectFunction] <- - Subscribe: when done
}


package "Srv1" {
    ["srv1.reflection"] -up-> grpc : registry
    grpc <-..right-> ["Srv1.GetSomething"] : call
    grpc <-..right-> ["Srv1.PutSomething"] : call
}



package "Srv2" {
    ["srv2.reflection"] -up-> grpc : registry
    grpc <-..right-> ["Srv2.GetSomething"] : call
    grpc <-..right-> ["Srv2.PutSomething"] : call
}


@enduml

PlantUML version 1.2017.12(Wed Apr 26 19:06:36 MSK 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_112-release-736-b21
Operating System: Mac OS X
OS Version: 10.11.6
Default Encoding: UTF-8
Language: ru
Country: RU
--></g></svg>